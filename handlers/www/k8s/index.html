<!doctype html>
<html ng-app="KubernetesPlay" ng-controller="PlayController">
    <head>
        <title>Kubernetes Playground</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic|Material+Icons" />
        <link rel="stylesheet" href="https://unpkg.com/angular-material@1.1.10/angular-material.min.css">
        <link rel="stylesheet" href="/assets/xterm/xterm.css" />
        <link rel="stylesheet" href="/assets/xterm/addons/fullscreen/fullscreen.css" />
        
        <!-- Custom CSS Integration -->
        <style>
            /* Reset and base styles */
            * {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }

            body, html {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif, 'Roboto', sans-serif;
                background: #1a202c;
                color: white;
                height: 100vh;
                overflow: hidden;
            }

            /* Main playground layout */
            .playground-header {
                background: #4c51bf;
                padding: 15px 20px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            }

            .header-left {
                display: flex;
                align-items: center;
                gap: 15px;
            }

            .header-left h1 {
                color: white;
                font-size: 20px;
                font-weight: 500;
            }

            .timer-display {
                background: rgba(255, 255, 255, 0.2);
                padding: 8px 16px;
                border-radius: 20px;
                font-weight: bold;
                color: white;
            }

            .header-right {
                display: flex;
                gap: 10px;
            }

            .btn {
                padding: 10px 20px;
                border: none;
                border-radius: 6px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 14px;
            }

            .btn-secondary {
                background: rgba(255, 255, 255, 0.2);
                color: white;
            }

            .btn-secondary:hover {
                background: rgba(255, 255, 255, 0.3);
            }

            .btn-danger {
                background: #e53e3e;
                color: white;
            }

            .btn-danger:hover {
                background: #c53030;
            }

            /* Main content area */
            .main-content {
                display: flex;
                height: calc(100vh - 80px);
            }

            /* Stats bar */
            .stats-bar {
                background: #2d3748;
                padding: 15px 20px;
                display: flex;
                gap: 30px;
                border-bottom: 1px solid #4a5568;
            }

            .stat-item {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .stat-icon {
                background: #4c51bf;
                padding: 8px;
                border-radius: 6px;
                color: white;
                font-weight: bold;
                font-size: 12px;
            }

            .stat-content h4 {
                font-size: 12px;
                color: #a0aec0;
                text-transform: uppercase;
                margin-bottom: 2px;
            }

            .stat-content span {
                font-weight: 500;
                color: white;
            }

            /* Terminal area */
            .terminal-section {
                flex: 1;
                display: flex;
                flex-direction: column;
                background: #1a202c;
            }

            .terminal-container {
                flex: 1;
                background: #000;
                padding: 20px;
                font-family: 'Courier New', monospace;
                font-size: 14px;
                line-height: 1.4;
                overflow-y: auto;
            }

            /* Cheat sheet sidebar */
            .cheat-sheet {
                width: 350px;
                background: #2d3748;
                border-left: 1px solid #4a5568;
                padding: 20px;
                overflow-y: auto;
            }

            .cheat-sheet h3 {
                color: #4c51bf;
                margin-bottom: 20px;
                font-size: 18px;
            }

            .command-group {
                margin-bottom: 25px;
            }

            .command-group h4 {
                color: #4fc3f7;
                margin-bottom: 10px;
                font-size: 14px;
            }

            .command {
                background: rgba(0, 0, 0, 0.3);
                padding: 8px 12px;
                border-radius: 4px;
                margin-bottom: 8px;
                font-family: 'Courier New', monospace;
                font-size: 12px;
            }

            .command code {
                color: #4fc3f7;
            }

            .command-desc {
                color: #a0aec0;
                font-size: 11px;
                margin-top: 4px;
            }

            /* Loading state */
            .loading {
                display: flex;
                align-items: center;
                justify-content: center;
                height: 100vh;
                flex-direction: column;
                gap: 20px;
            }

            .spinner {
                width: 40px;
                height: 40px;
                border: 4px solid #4a5568;
                border-top: 4px solid #4c51bf;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            /* Responsive */
            @media (max-width: 768px) {
                .cheat-sheet {
                    display: none;
                }
                
                .main-content {
                    flex-direction: column;
                }
                
                .stats-bar {
                    flex-wrap: wrap;
                    gap: 15px;
                }
            }

            /* Custom scrollbar */
            ::-webkit-scrollbar {
                width: 8px;
            }

            ::-webkit-scrollbar-track {
                background: #2d3748;
            }

            ::-webkit-scrollbar-thumb {
                background: #4a5568;
                border-radius: 4px;
            }

            ::-webkit-scrollbar-thumb:hover {
                background: #4c51bf;
            }

            /* Terminal prompt styling */
            .terminal-prompt {
                color: #4fc3f7;
            }

            .terminal-output {
                color: #a0aec0;
                white-space: pre-wrap;
            }
        </style>
        
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89019737-3"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-89019737-3');
        </script>
    </head>
    <body>
        <!-- Loading state -->
        <div class="loading" ng-if="!isReady">
            <div class="spinner"></div>
            <h3>Initializing Kubernetes Playground...</h3>
        </div>

        <!-- Main application -->
        <div ng-if="isReady" ng-cloak>
            <!-- Header -->
            <div class="playground-header">
                <div class="header-left">
                    <h1>üê≥ Kubernetes Playground</h1>
                    <div class="timer-display">
                        ‚è∞ {{timeRemaining}}
                    </div>
                </div>
                <div class="header-right">
                    <button class="btn btn-secondary" ng-click="toggleCheatSheet()">
                        üìã Cheat Sheet
                    </button>
                    <button class="btn btn-danger" ng-click="closeSession()">
                        üîí Close Session
                    </button>
                </div>
            </div>

            <!-- Stats Bar -->
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-icon">MEM</div>
                    <div class="stat-content">
                        <h4>Memory</h4>
                        <span>{{memoryUsage}}</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">CPU</div>
                    <div class="stat-content">
                        <h4>CPU Usage</h4>
                        <span>{{cpuUsage}}</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">POD</div>
                    <div class="stat-content">
                        <h4>Container</h4>
                        <span>{{containerId}}</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">SSH</div>
                    <div class="stat-content">
                        <h4>SSH Access</h4>
                        <span>{{sshAccess}}</span>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Terminal Section -->
                <div class="terminal-section">
                    <div class="terminal-container" id="terminal">
                        <div class="terminal-output">
###################################################################
#                         W A R N I N G                           #
###################################################################
# DO NOT use personal credentials!                                #
# This is just a sandbox environment. Tutorials Dojo is not       #
# liable for any data loss or security issues that may arise.     #
#                                                                 #
# Welcome to Kubernetes Playground by Tutorials Dojo!             #
# Practice Kubernetes commands safely in this isolated sandbox.   #
#                                                                 #
# Developed by Jodi Gabano and Tutorials Dojo Team &lt;3          #
###################################################################

<span class="terminal-prompt">[node1] (local) root@10.0.1.2 ~</span>
<span id="cursor">‚ñà</span>
                        </div>
                    </div>
                </div>

                <!-- Cheat Sheet Sidebar -->
                <div class="cheat-sheet" ng-show="showCheatSheet">
                    <h3>üìö Kubernetes Commands Cheat Sheet</h3>
                    
                    <div class="command-group">
                        <h4>üöÄ Basic Commands</h4>
                        <div class="command">
                            <code>kubectl version</code>
                            <div class="command-desc">Show Kubernetes version</div>
                        </div>
                        <div class="command">
                            <code>kubectl cluster-info</code>
                            <div class="command-desc">Display cluster information</div>
                        </div>
                        <div class="command">
                            <code>kubectl get nodes</code>
                            <div class="command-desc">List all nodes in cluster</div>
                        </div>
                    </div>

                    <div class="command-group">
                        <h4>üèóÔ∏è Pod Management</h4>
                        <div class="command">
                            <code>kubectl get pods</code>
                            <div class="command-desc">List all pods</div>
                        </div>
                        <div class="command">
                            <code>kubectl create pod nginx --image=nginx</code>
                            <div class="command-desc">Create a pod with nginx image</div>
                        </div>
                        <div class="command">
                            <code>kubectl describe pod [pod-name]</code>
                            <div class="command-desc">Show detailed pod information</div>
                        </div>
                        <div class="command">
                            <code>kubectl delete pod [pod-name]</code>
                            <div class="command-desc">Delete a specific pod</div>
                        </div>
                    </div>

                    <div class="command-group">
                        <h4>üìã Deployments</h4>
                        <div class="command">
                            <code>kubectl get deployments</code>
                            <div class="command-desc">List all deployments</div>
                        </div>
                        <div class="command">
                            <code>kubectl create deployment nginx --image=nginx</code>
                            <div class="command-desc">Create nginx deployment</div>
                        </div>
                        <div class="command">
                            <code>kubectl scale deployment nginx --replicas=3</code>
                            <div class="command-desc">Scale deployment to 3 replicas</div>
                        </div>
                    </div>

                    <div class="command-group">
                        <h4>üåê Services</h4>
                        <div class="command">
                            <code>kubectl get services</code>
                            <div class="command-desc">List all services</div>
                        </div>
                        <div class="command">
                            <code>kubectl expose deployment nginx --port=80 --type=NodePort</code>
                            <div class="command-desc">Expose deployment as service</div>
                        </div>
                    </div>

                    <div class="command-group">
                        <h4>üîç Troubleshooting</h4>
                        <div class="command">
                            <code>kubectl logs [pod-name]</code>
                            <div class="command-desc">View pod logs</div>
                        </div>
                        <div class="command">
                            <code>kubectl exec -it [pod-name] -- /bin/bash</code>
                            <div class="command-desc">Execute shell in pod</div>
                        </div>
                        <div class="command">
                            <code>kubectl get events</code>
                            <div class="command-desc">List cluster events</div>
                        </div>
                    </div>

                    <div class="command-group">
                        <h4>üì¶ Namespaces</h4>
                        <div class="command">
                            <code>kubectl get namespaces</code>
                            <div class="command-desc">List all namespaces</div>
                        </div>
                        <div class="command">
                            <code>kubectl create namespace [name]</code>
                            <div class="command-desc">Create new namespace</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scripts -->
        <script src="https://unpkg.com/reconnectingwebsocket@1.0.0/reconnecting-websocket.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://unpkg.com/angular@1.5.5/angular.min.js"></script>
        <script src="https://unpkg.com/angular-animate@1.5.5/angular-animate.min.js"></script>
        <script src="https://unpkg.com/angular-aria@1.5.5/angular-aria.min.js"></script>
        <script src="https://unpkg.com/angular-messages@1.5.5/angular-messages.min.js"></script>
        <script src="https://unpkg.com/angular-material@1.1.0/angular-material.min.js"></script>
        <script src="https://unpkg.com/moment@2.16.0/min/moment.min.js"></script>

        <!-- Custom Application Script -->
        <script>
            // Angular application
            var app = angular.module('KubernetesPlay', ['ngMaterial']);

            app.controller('PlayController', ['$scope', '$interval', '$timeout', function($scope, $interval, $timeout) {
                // Initialize application state
                $scope.isReady = false;
                $scope.showCheatSheet = true;
                $scope.timeRemaining = '15:00';
                $scope.memoryUsage = '0.1% (29.45MiB / 15.62GiB)';
                $scope.cpuUsage = '0.0%';
                $scope.containerId = 'k8s-node1-tutorial';
                $scope.sshAccess = 'node1@tutorial.k8s.com';

                // Timer logic (15 minutes = 900 seconds)
                var totalSeconds = 900;
                var currentSeconds = totalSeconds;

                // Initialize the playground
                $timeout(function() {
                    $scope.isReady = true;
                    startTimer();
                    initializeTerminal();
                }, 2000);

                // Timer function
                function startTimer() {
                    $interval(function() {
                        if (currentSeconds > 0) {
                            currentSeconds--;
                            var minutes = Math.floor(currentSeconds / 60);
                            var seconds = currentSeconds % 60;
                            $scope.timeRemaining = minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
                        } else {
                            $scope.timeRemaining = '00:00';
                            $scope.closeSession();
                        }
                    }, 1000);
                }

                // Terminal initialization
                function initializeTerminal() {
                    // Simulate terminal cursor blinking
                    $interval(function() {
                        var cursor = document.getElementById('cursor');
                        if (cursor) {
                            cursor.style.opacity = cursor.style.opacity === '0' ? '1' : '0';
                        }
                    }, 500);

                    // Simulate periodic resource updates
                    $interval(function() {
                        // Random CPU usage between 0-5%
                        var cpu = (Math.random() * 5).toFixed(1);
                        $scope.cpuUsage = cpu + '%';

                        // Random memory usage
                        var memBase = 29.45 + (Math.random() * 10);
                        var memPerc = (memBase / 156.2).toFixed(1);
                        $scope.memoryUsage = memPerc + '% (' + memBase.toFixed(2) + 'MiB / 15.62GiB)';
                    }, 3000);
                }

                // Toggle cheat sheet visibility
                $scope.toggleCheatSheet = function() {
                    $scope.showCheatSheet = !$scope.showCheatSheet;
                };

                // Close session function
                $scope.closeSession = function() {
                    if (confirm('Are you sure you want to close this session?')) {
                        alert('Session closed. Thank you for using Kubernetes Playground!');
                        // In real implementation, this would redirect or close the session
                        window.location.reload();
                    }
                };

                // Handle window beforeunload
                window.onbeforeunload = function (e) {
                    return 'Make sure you saved your progress before leaving!';
                };
            }]);

            // Configure Angular Material theme
            app.config(function($mdThemingProvider) {
                $mdThemingProvider.theme('default')
                    .primaryPalette('indigo')
                    .accentPalette('blue');
            });
        </script>
    </body>
</html>